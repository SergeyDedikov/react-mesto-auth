(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{30:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),s=n(20),i=n.n(s),o=n(8),r=n(24),u=n(2),l=n(3),d=c.a.createContext(),b={name:"",about:"",avatar:"",_id:""},_=(n(30),n(11)),h=n(12),m=new(function(){function e(t){Object(_.a)(this,e),this._checkResult=function(e){return e.ok?e.json():Promise.reject("".concat(e.status))},this._url=t.url,this._cohortId=t.cohortId,this._tokenId=t.tokenId,this._headers={authorization:this._tokenId,"Content-Type":"application/json"}}return Object(h.a)(e,[{key:"getCardList",value:function(){return fetch("".concat(this._url,"/v1/").concat(this._cohortId,"/cards"),{method:"GET",headers:this._headers}).then(this._checkResult)}},{key:"getUserInfo",value:function(){return fetch("".concat(this._url,"/v1/").concat(this._cohortId,"/users/me"),{method:"GET",headers:this._headers}).then(this._checkResult)}},{key:"setUserAvatar",value:function(e){var t=e.avatar;return fetch("".concat(this._url,"/v1/").concat(this._cohortId,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})}).then(this._checkResult)}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.about;return fetch("".concat(this._url,"/v1/").concat(this._cohortId,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:n})}).then(this._checkResult)}},{key:"addNewCard",value:function(e){var t=e.name,n=e.link;return fetch("".concat(this._url,"/v1/").concat(this._cohortId,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:n})}).then(this._checkResult)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._url,"/v1/").concat(this._cohortId,"/cards/").concat(e._id),{method:"DELETE",headers:this._headers}).then(this._checkResult)}},{key:"changeLikeCardStatus",value:function(e,t){return fetch("".concat(this._url,"/v1/").concat(this._cohortId,"/cards/likes/").concat(e._id),{method:t?"PUT":"DELETE",headers:this._headers}).then(this._checkResult)}}]),e}())({url:"https://mesto.nomoreparties.co",cohortId:"cohort-29",tokenId:"aac8a826-6020-4164-947b-69b028e1e5c6"}),j=new(function(){function e(t){Object(_.a)(this,e),this._checkResult=function(e){return e.ok?e.json():Promise.reject("".concat(e.status))},this._url=t,this._headers={"Content-Type":"application/json"}}return Object(h.a)(e,[{key:"register",value:function(e){var t=e.password,n=e.email;return fetch("".concat(this._url,"/signup"),{method:"POST",headers:this._headers,body:JSON.stringify({password:t,email:n})}).then(this._checkResult)}},{key:"login",value:function(e){var t=e.password,n=e.email;return fetch("".concat(this._url,"/signin"),{method:"POST",headers:this._headers,body:JSON.stringify({password:t,email:n})}).then(this._checkResult)}},{key:"checkToken",value:function(e){return fetch("".concat(this._url,"/users/me"),{method:"GET",headers:{"Content-Type":"application/json",authorization:"Bearer ".concat(e)}}).then(this._checkResult)}}]),e}())("https://auth.nomoreparties.co"),p=n.p+"static/media/logo-mesto.03b78ada.svg",f=n(0);function O(e){var t=e.onSignOut,n=e.onChangeVisibleMenu,a=e.isVisibleMenu,c=Object(l.h)().pathname;return"/"===c?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:t,className:"button link signout signout_place_nav",type:"button",children:"\u0412\u044b\u0439\u0442\u0438"}),Object(f.jsx)("button",{onClick:n,className:"button header__burger-menu ".concat(a&&"header__burger-menu_close"),type:"button"})]}):"/sign-up"===c?Object(f.jsx)(o.b,{to:"/sign-in",className:"button link",children:"\u0412\u043e\u0439\u0442\u0438"}):"/sign-in"===c?Object(f.jsx)(o.b,{to:"/sign-up",className:"button link",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}):null}function v(e){var t=e.loggedIn,n=e.currentUserEmail,c=e.onSignOut,s=Object(a.useState)(!1),i=Object(u.a)(s,2),o=i[0],r=i[1],l="header__container-mobil ".concat(t&&o&&"header__container-mobil_visible");return Object(a.useEffect)((function(){t||r(!1)}),[t]),Object(f.jsxs)("header",{className:"header",children:[Object(f.jsxs)("div",{className:l,children:[Object(f.jsx)("p",{className:"header__user-email header__user-email_mobil",children:n}),Object(f.jsx)("button",{onClick:c,className:"button link signout signout_place_header",type:"button",children:"\u0412\u044b\u0439\u0442\u0438"})]}),Object(f.jsxs)("div",{className:"header__container-general",children:[Object(f.jsx)("img",{className:"header__logo",src:p,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f \u041c\u0435\u0441\u0442\u043e.\u0420\u043e\u0441\u0441\u0438\u044f"}),Object(f.jsx)("p",{className:"header__user-email",children:n}),Object(f.jsx)("nav",{className:"header__nav",children:Object(f.jsx)(O,{onSignOut:c,onChangeVisibleMenu:function(){r(!o)},isVisibleMenu:o})})]})]})}var x=function(e){var t=e.card,n=e.onCardClick,c=e.onCardLike,s=e.onCardDelete,i=Object(a.useContext)(d),o=t.owner._id===i._id,r="card__button-remove ".concat(!o&&"card__button-remove_hidden"),u=t.likes.some((function(e){return e._id===i._id})),l="card__button-like ".concat(u&&"card__button-like_active");return Object(f.jsx)("li",{children:Object(f.jsxs)("figure",{className:"card",children:[Object(f.jsx)("img",{className:"card__photo",src:t.link,alt:"\u041d\u0430 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438: ".concat(t.name),onClick:function(){n(t)}}),Object(f.jsxs)("figcaption",{className:"card__info",children:[Object(f.jsx)("h2",{className:"card__description",children:t.name}),Object(f.jsxs)("div",{className:"card__likes-box",children:[Object(f.jsx)("button",{onClick:function(){c(t)},className:"".concat(l," button"),type:"button"}),Object(f.jsx)("p",{className:"card__likes-count",children:t.likes.length})]}),Object(f.jsx)("button",{onClick:function(){s(t)},className:"".concat(r," button"),type:"button"})]})]})})};var g=function(e){var t=Object(a.useContext)(d);return Object(f.jsxs)("main",{className:"main",children:[Object(f.jsxs)("section",{className:"profile","aria-label":"\u041f\u0440\u043e\u0444\u0438\u043b\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",children:[Object(f.jsxs)("div",{className:"profile__avatar-box",children:[Object(f.jsx)("img",{className:"profile__avatar",src:t.avatar,alt:"\u0410\u0432\u0430\u0442\u0430\u0440 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),Object(f.jsx)("button",{onClick:e.onEditAvatar,className:"profile__button profile__button_type_avatar button",type:"button"})]}),Object(f.jsxs)("div",{className:"profile__info",children:[Object(f.jsx)("h1",{className:"profile__name",children:t.name}),Object(f.jsx)("button",{onClick:e.onEditProfile,className:"profile__button profile__button_type_edit button",type:"button"}),Object(f.jsx)("p",{className:"profile__job",children:t.about})]}),Object(f.jsx)("button",{onClick:e.onAddPlace,className:"profile__button profile__button_type_add button",type:"button"})]}),Object(f.jsx)("section",{className:"cards","aria-label":"\u041a\u0430\u0440\u0442\u043e\u0447\u043a\u0438 \u043c\u0435\u0441\u0442",children:Object(f.jsx)("ul",{className:"cards__list",children:e.cards.map((function(t){return Object(f.jsx)(x,{card:t,onCardClick:e.onCardClick,onCardLike:e.onCardLike,onCardDelete:e.onCardDelete},t._id)}))})})]})};var k=function(){var e=new Date;return Object(f.jsx)("footer",{className:"footer",children:Object(f.jsxs)("p",{className:"footer__copyright",lang:"en",children:["\xa9 ",e.getFullYear()," Mesto Russia & Sergey Dedikov"]})})};var C=function(e){var t=e.card,n=e.onClose;return Object(f.jsx)("div",{className:"popup popup_type_card ".concat(t?"popup_opened":""),children:Object(f.jsxs)("figure",{className:"popup__card",children:[Object(f.jsx)("img",{className:"popup__card-image",src:t?t.link:"",alt:t?"\u041d\u0430 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438: ".concat(t.name):""}),Object(f.jsxs)("figcaption",{className:"popup__card-info",children:[Object(f.jsx)("p",{className:"popup__card-description",children:t?t.name:""}),Object(f.jsx)("button",{onClick:n,className:"popup__close popup__close_card button",type:"button"})]})]})})},N={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__error_visible"},S=function(){function e(t,n){var a=this,c=t.formSelector,s=t.inputSelector,i=t.submitButtonSelector,o=t.inactiveButtonClass,r=t.inputErrorClass,u=t.errorClass;Object(_.a)(this,e),this._checkInputValidity=function(e){e.validity.valid?a._hideInputError(e):a._showInputError(e)},this._disableButtonSubmit=function(){a._buttonElement.setAttribute("disabled",!0),a._buttonElement.classList.add(a._inactiveButtonClass)},this._enableButtonSubmit=function(){a._buttonElement.removeAttribute("disabled"),a._buttonElement.classList.remove(a._inactiveButtonClass)},this._setEventListeners=function(){a._toggleButtonState(),a._inputList.forEach((function(e){e.addEventListener("input",(function(){a._checkInputValidity(e),a._toggleButtonState()}))}))},this._formElement=document.querySelector("".concat(c,"_").concat(n)),this._inputSelector=s,this._submitButtonSelector=i,this._inactiveButtonClass=o,this._inputErrorClass=r,this._errorClass=u,this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector)}return Object(h.a)(e,[{key:"_showInputError",value:function(e){var t=e.nextElementSibling;e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(e){var t=e.nextElementSibling;t.classList.remove(this._errorClass),t.textContent="",e.classList.remove(this._inputErrorClass)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_hasEmptyInput",value:function(){return this._inputList.every((function(e){return 0===e.value.length}))}},{key:"_isFormNotValid",value:function(){return!(!this._hasInvalidInput()&&!this._hasEmptyInput())}},{key:"_toggleButtonState",value:function(){this._isFormNotValid()?this._disableButtonSubmit():this._enableButtonSubmit()}},{key:"resetValidation",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){e._hideInputError(t)}))}},{key:"enableValidation",value:function(){this._setEventListeners()}}]),e}();var y=function(e){var t=Object(a.useState)(null),n=Object(u.a)(t,2),c=n[0],s=n[1];return Object(a.useEffect)((function(){var t=new S(N,e.name);t.enableValidation(),s(t)}),[e.name]),Object(a.useEffect)((function(){e.isOpen&&c&&c.resetValidation()}),[e.isOpen,c]),Object(f.jsx)("div",{className:"\n        popup popup_type_".concat(e.name,"\n        ").concat(e.isOpen?"popup_opened":"","\n      "),children:Object(f.jsxs)("div",{className:"popup__container popup__container_type_".concat(e.name),children:[Object(f.jsxs)("form",{onSubmit:e.onSubmit,name:"".concat(e.name),className:"form form_".concat(e.name),noValidate:!0,children:[Object(f.jsx)("h3",{className:"form__heading",children:e.title}),e.children,Object(f.jsx)("button",{className:"form__button form__button_".concat(e.name," button"),type:"submit",children:e.textButtonSubmit})]}),Object(f.jsx)("button",{onClick:e.onClose,className:"popup__close button",type:"button"})]})})};var E=function(e){var t=Object(a.useContext)(d),n=Object(a.useState)(""),c=Object(u.a)(n,2),s=c[0],i=c[1],o=Object(a.useState)(""),r=Object(u.a)(o,2),l=r[0],b=r[1];return Object(a.useEffect)((function(){t&&e.isOpen&&(i(t.name),b(t.about))}),[t,e.isOpen]),Object(f.jsx)(y,{isOpen:e.isOpen,onClose:e.onClose,name:"edit-profile",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",textButtonSubmit:e.isLoading?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",onSubmit:function(t){t.preventDefault(),e.onUpdateUser({name:s,about:l})},children:Object(f.jsxs)("fieldset",{className:"form__input-container",children:[Object(f.jsxs)("label",{className:"form__field",children:[Object(f.jsx)("input",{value:s,onChange:function(e){i(e.target.value)},id:"name",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f",className:"form__input",type:"text",name:"name",required:!0,minLength:"2",maxLength:"40"}),Object(f.jsx)("span",{id:"name-error",className:"form__error"})]}),Object(f.jsxs)("label",{className:"form__field",children:[Object(f.jsx)("input",{value:l,onChange:function(e){b(e.target.value)},id:"job",placeholder:"\u0420\u0430\u0441\u0441\u043a\u0430\u0436\u0438\u0442\u0435 \u043d\u0435\u043c\u043d\u043e\u0433\u043e \u043e \u0441\u0435\u0431\u0435",className:"form__input",type:"text",name:"job",required:!0,minLength:"2",maxLength:"200"}),Object(f.jsx)("span",{id:"job-error",className:"form__error"})]})]})})},L=n(23);var I=function(e){var t=Object(a.useRef)();return Object(L.useEffect)((function(){e.isSubmitted&&(t.current.value="")}),[e.isSubmitted]),Object(f.jsx)(y,{isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(n){n.preventDefault(),e.onUpdateAvatar({avatar:t.current.value})},name:"edit-avatar",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",textButtonSubmit:e.isLoading?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",children:Object(f.jsx)("fieldset",{className:"form__input-container",children:Object(f.jsxs)("label",{className:"form__field",children:[Object(f.jsx)("input",{ref:t,id:"avatar",className:"form__input",type:"url",name:"avatar",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0430\u0432\u0430\u0442\u0430\u0440",required:!0}),Object(f.jsx)("span",{id:"avatar-error",className:"form__error"})]})})})},B=n(13),w=n(9);var T=function(e){var t=Object(a.useState)({place:"",link:""}),n=Object(u.a)(t,2),c=n[0],s=n[1];function i(e){s((function(t){return Object(w.a)(Object(w.a)({},t),{},Object(B.a)({},e.target.name,e.target.value))}))}return Object(a.useEffect)((function(){e.isSubmitted&&s({place:"",link:""})}),[e.isSubmitted]),Object(f.jsx)(y,{isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onAddPlace({name:c.place,link:c.link})},name:"add-place",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",textButtonSubmit:e.isLoading?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",children:Object(f.jsxs)("fieldset",{className:"form__input-container",children:[Object(f.jsxs)("label",{className:"form__field",children:[Object(f.jsx)("input",{value:c.place,onChange:i,id:"place",className:"form__input",type:"text",name:"place",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",required:!0,minLength:"2",maxLength:"30"}),Object(f.jsx)("span",{id:"place-error",className:"form__error"})]}),Object(f.jsxs)("label",{className:"form__field",children:[Object(f.jsx)("input",{value:c.link,onChange:i,id:"link",className:"form__input",type:"url",name:"link",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0}),Object(f.jsx)("span",{id:"link-error",className:"form__error"})]})]})})};var P=function(e){return Object(f.jsx)(y,{isOpen:e.isOpen,onClose:e.onClose,name:"confirmation",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",textButtonSubmit:e.isLoading?"\u041e\u0436\u0438\u0434\u0430\u0439\u0442\u0435...":"\u0414\u0430"})},A=n(25),R=["component"],U=function(e){var t=e.component,n=Object(A.a)(e,R);return Object(f.jsx)(l.b,{path:n.path,children:function(){return n.loggedIn?Object(f.jsx)(t,Object(w.a)({},n)):Object(f.jsx)(l.a,{to:"/sign-in"})}})};var D=function(e){var t=Object(a.useState)({email:"",password:""}),n=Object(u.a)(t,2),c=n[0],s=n[1];function i(e){s((function(t){return Object(w.a)(Object(w.a)({},t),{},Object(B.a)({},e.target.name,e.target.value))}))}return Object(f.jsxs)("section",{className:"authentication",children:[Object(f.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.onSubmit({email:c.email,password:c.password})},name:"".concat(e.name),className:"form form_".concat(e.name),children:[Object(f.jsx)("h3",{className:"form__heading form__heading_type_authentication",children:e.title}),Object(f.jsxs)("fieldset",{className:"form__input-container form__input-container_authentication",children:[Object(f.jsxs)("label",{className:"form__field",children:[Object(f.jsx)("input",{value:c.email,onChange:i,id:"email-".concat(e.name),className:"form__input form__input_theme_dark",type:"email",name:"email",placeholder:"Email",required:!0}),Object(f.jsx)("span",{id:"place-error",className:"form__error"})]}),Object(f.jsxs)("label",{className:"form__field",children:[Object(f.jsx)("input",{value:c.password,onChange:i,id:"password-".concat(e.name),className:"form__input form__input_theme_dark",type:"password",name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",required:!0}),Object(f.jsx)("span",{id:"link-error",className:"form__error"})]})]}),Object(f.jsx)("button",{className:"form__button form__button_authentication form__button_theme_dark button",type:"submit",children:e.textButtonSubmit})]}),e.children]})};var V=function(e){var t=e.onLogin;return Object(f.jsx)(D,{onSubmit:t,name:"login",title:"\u0412\u0445\u043e\u0434",textButtonSubmit:"\u0412\u043e\u0439\u0442\u0438"})};var q=function(e){var t=e.onRegister;return Object(f.jsx)(D,{onSubmit:t,name:"register",title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",textButtonSubmit:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",children:Object(f.jsxs)("p",{className:"authentication__text",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"," ",Object(f.jsx)("span",{children:Object(f.jsx)(o.b,{to:"/sign-in",className:"button link",children:"\u0412\u043e\u0439\u0442\u0438"})})]})})};var F=function(e){var t="popup__background ".concat(e.isOk?"popup__background_succes":"popup__background_fail"),n=e.isOk?"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!":"".concat(e.message);return Object(f.jsx)("div",{className:"\n        popup popup_type_infotooltip\n        ".concat(e.isOpen?"popup_opened":"","\n      "),children:Object(f.jsxs)("div",{className:"popup__container popup__container_type_infotooltip",children:[Object(f.jsx)("div",{className:t}),Object(f.jsx)("h3",{className:"popup__message",children:n}),Object(f.jsx)("button",{onClick:e.onClose,className:"popup__close button",type:"button"})]})})};var J=function(){var e=Object(l.g)(),t=Object(a.useState)(!1),n=Object(u.a)(t,2),c=n[0],s=n[1],i=Object(a.useState)(b),o=Object(u.a)(i,2),_=o[0],h=o[1],p=Object(a.useState)(""),O=Object(u.a)(p,2),x=O[0],N=O[1],S=Object(a.useState)([]),y=Object(u.a)(S,2),L=y[0],B=y[1],w=Object(a.useState)(null),A=Object(u.a)(w,2),R=A[0],D=A[1],J=Object(a.useState)(!1),M=Object(u.a)(J,2),G=M[0],z=M[1],H=Object(a.useState)(!1),Y=Object(u.a)(H,2),K=Y[0],Q=Y[1],W=Object(a.useState)(!1),X=Object(u.a)(W,2),Z=X[0],$=X[1],ee=Object(a.useState)(!1),te=Object(u.a)(ee,2),ne=te[0],ae=te[1],ce=Object(a.useState)(!1),se=Object(u.a)(ce,2),ie=se[0],oe=se[1],re=Object(a.useState)(null),ue=Object(u.a)(re,2),le=ue[0],de=ue[1],be=Object(a.useState)("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437."),_e=Object(u.a)(be,2),he=_e[0],me=_e[1],je=Object(a.useState)(!1),pe=Object(u.a)(je,2),fe=pe[0],Oe=pe[1],ve=Object(a.useState)(!1),xe=Object(u.a)(ve,2),ge=xe[0],ke=xe[1];function Ce(){localStorage.getItem("token")&&j.checkToken(localStorage.getItem("token")).then((function(t){t&&(s(!0),N(t.data.email),e.push("/"))})).catch((function(e){Ne(!1),"400"===e&&me("\u0422\u043e\u043a\u0435\u043d \u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u0438\u043b\u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u043d\u0435 \u0432 \u0442\u043e\u043c \u0444\u043e\u0440\u043c\u0430\u0442\u0435"),"401"===e&&me("\u041f\u0435\u0440\u0435\u0434\u0430\u043d\u043d\u044b\u0439 \u0442\u043e\u043a\u0435\u043d \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u0435\u043d")}))}function Ne(e){oe(!0),de(e)}function Se(){z(!1),Q(!1),$(!1),ae(!1),oe(!1),D(null),setTimeout((function(){me("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437.")}),1e3)}return Object(a.useEffect)((function(){Promise.all([m.getUserInfo(),m.getCardList()]).then((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];h(n),B(a)})).catch((function(e){console.log(e),Ne(!1)}))}),[]),Object(a.useEffect)((function(){Ce()}),[]),Object(f.jsxs)(d.Provider,{value:_,children:[Object(f.jsx)(v,{currentUserEmail:x,onSignOut:function(){localStorage.removeItem("token"),e.push("/sign-in"),N(""),s(!1)},loggedIn:c}),Object(f.jsxs)(l.d,{children:[Object(f.jsx)(U,{exact:!0,path:"/",loggedIn:c,component:g,onEditAvatar:function(){z(!0),Oe(!1)},onEditProfile:function(){Q(!0)},onAddPlace:function(){$(!0),Oe(!1)},cards:L,onCardClick:function(e){D(e)},onCardLike:function(e){var t=e.likes.some((function(e){return e._id===_._id}));m.changeLikeCardStatus(e,!t).then((function(t){B((function(n){return n.map((function(n){return n._id===e._id?t:n}))}))})).catch((function(e){console.log(e)}))},onCardDelete:function(e){m.deleteCard(e).then((function(){B((function(t){return t.filter((function(t){return t._id!==e._id}))}))})).catch((function(e){console.log(e)}))}}),Object(f.jsx)(l.b,{path:"/sign-up",children:Object(f.jsx)(q,{onRegister:function(t){j.register(t).then((function(t){400!==t.statusCode&&(me("\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!"),Ne(!0),setTimeout((function(){e.push("/sign-in")}),2e3))})).catch((function(e){Ne(!1),"400"===e&&me("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437.")}))}})}),Object(f.jsx)(l.b,{path:"/sign-in",children:Object(f.jsx)(V,{onLogin:function(e){j.login(e).then((function(e){localStorage.setItem("token",e.token),Ce()})).catch((function(e){Ne(!1),"400"===e&&me("\u041d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437."),"401"===e&&me("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 email \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437.")}))}})})]}),Object(f.jsx)(k,{}),Object(f.jsx)(I,{isOpen:G,onClose:Se,onUpdateAvatar:function(e){ke(!0),m.setUserAvatar(e).then((function(e){h(e),Oe(!0),Se()})).catch((function(e){console.log(e)})).finally((function(){ke(!1)}))},isSubmitted:fe,isLoading:ge}),Object(f.jsx)(E,{isOpen:K,onClose:Se,onUpdateUser:function(e){ke(!0),m.setUserInfo(e).then((function(e){h(e),Se()})).catch((function(e){console.log(e)})).finally((function(){ke(!1)}))},isLoading:ge}),Object(f.jsx)(T,{isOpen:Z,onClose:Se,onAddPlace:function(e){ke(!0),m.addNewCard(e).then((function(e){B([e].concat(Object(r.a)(L))),Se(),Oe(!0)})).catch((function(e){console.log(e)})).finally((function(){ke(!1)}))},isSubmitted:fe,isLoading:ge}),Object(f.jsx)(P,{isOpen:ne,onClose:Se,isLoading:ge}),Object(f.jsx)(F,{isOk:le,isOpen:ie,message:he,onClose:Se}),Object(f.jsx)(C,{card:R,onClose:Se})]})},M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,41)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),s(e),i(e)}))};i.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(o.a,{children:Object(f.jsx)(J,{})})}),document.getElementById("root")),M()}},[[40,1,2]]]);
//# sourceMappingURL=main.94f356ae.chunk.js.map